<!DOCTYPE html>
<html lang="es">
	<%-include('../partials/head') %>
	<body>
		<%-include('../partials/header') %> <%-include('../partials/nav') %>

		<% if(nombreCategoria != "Resultado de la busqueda") { %> 
			<div
				style="--bs-breadcrumb-divider: '>'; background-color: #eee"
				aria-label="breadcrumb"
				class="ps-4 pt-3"
			>
				<ol class="breadcrumb my-0 pb-3">
						<li class="breadcrumb-item"><a href="/">Home</a></li>
						<li class="breadcrumb-item active" aria-current="page">
							<%= nombreCategoria.toUpperCase() %>
						</li>
					</ol>
			</div>
		<% } %> 

		<div
			class="d-flex d-md-block justify-content-between align-items-center"
			style="background-color: #eee"
		>
			<p class="ps-4 py-3 mb-0 fs-1 fw-bold" style="background-color: #eee">
				<% if(nombreCategoria != "Resultado de la busqueda") { %> 
					Art√≠culos de <%= nombreCategoria.toUpperCase() %>
				<% }else{ %> 
					<%= nombreCategoria.toUpperCase() %>
				<% } %> 
			</p>

			<% if(productos.length >= 1){ %>		
				<div class="pe-4">
					<button
						class="btn btn-outline-dark d-md-none h-75"
						type="button"
						data-bs-toggle="offcanvas"
						data-bs-target="#offcanvasWithBothOptions"
						aria-controls="offcanvasWithBothOptions"
					>
						<i class="fa-solid fa-filter"></i>
					</button>
					<div
						class="offcanvas offcanvas-start d-md-none"
						data-bs-scroll="true"
						tabindex="-1"
						id="offcanvasWithBothOptions"
						aria-labelledby="offcanvasWithBothOptionsLabel"
					>
						<div class="offcanvas-header d-md-none">
							<h5
								class="offcanvas-title fw-bold d-md-none"
								id="offcanvasWithBothOptionsLabel"
							>
								Filtros
							</h5>
							<button
								type="button"
								class="btn-close d-md-none"
								data-bs-dismiss="offcanvas"
								aria-label="Close"
							></button>
						</div>
						<div class="offcanvas-body d-md-none">
							<section
								class="p-3 w-100 border border-1 rounded mb-3"
								style="background-color: white"
							>
								<section class="sticky-top">
									<div class="accordion" id="accordionExample">
										<div class="accordion-item">
											<h2 class="accordion-header" id="headingFour">
												<button
													class="accordion-button collapsed"
													type="button"
													data-bs-toggle="collapse"
													data-bs-target="#collapseFour"
													aria-expanded="true"
													aria-controls="collapseFour"
												>
													Pais
												</button>
											</h2>
											<div
												id="collapseFour"
												class="accordion-collapse collapse"
												aria-labelledby="headingFour"
												data-bs-parent="#accordionExample"
											>
												<div class="accordion-body">
													<% for(let p of paises) { %> 
														<div class="form-check form-switch">
															<input
																class="form-check-input"
																type="checkbox"
																role="switch"
																id="flexSwitchCheckDefault"
															/>
															<label
																class="form-check-label"
																for="flexSwitchCheckDefault"
																><%= p.nombre %> </label
															>
														</div>
													<% } %> 
												</div>
											</div>
										</div>
										<div class="accordion-item">
											<h2 class="accordion-header" id="headingOne">
												<button
													class="accordion-button collapsed"
													type="button"
													data-bs-toggle="collapse"
													data-bs-target="#collapseOne"
													aria-expanded="true"
													aria-controls="collapseOne"
												>
													Tipo de producto
												</button>
											</h2>
											<div
												id="collapseOne"
												class="accordion-collapse collapse"
												aria-labelledby="headingOne"
												data-bs-parent="#accordionExample"
											>
												<div class="accordion-body">
													<% for(let t of tipos) { %> 
														<div class="form-check form-switch">
															<input
																class="form-check-input"
																type="checkbox"
																role="switch"
																id="flexSwitchCheckDefault"
															/>
															<label
																class="form-check-label"
																for="flexSwitchCheckDefault"
																><%= t.nombre %> </label
															>
														</div>
													<% } %> 
												</div>
											</div>
										</div>
										<div class="accordion-item">
											<h2 class="accordion-header" id="headingTwo">
												<button
													class="accordion-button collapsed"
													type="button"
													data-bs-toggle="collapse"
													data-bs-target="#collapseTwo"
													aria-expanded="false"
													aria-controls="collapseTwo"
												>
													Color
												</button>
											</h2>
											<div
												id="collapseTwo"
												class="accordion-collapse collapse"
												aria-labelledby="headingTwo"
												data-bs-parent="#accordionExample"
											>
												<div class="accordion-body">
													<div class="text-center mb-4">
														<ul
															class="nav justify-content-center align-items-center mx-auto"
															style="max-width: 300px"
														>
															<% for(let c of colores) { %> 
																<li class="nav-item">
																	<a class="nav-link p-0 my-2 mx-3" href="#">
																		<button
																		type="button"
																		class="btn btn-light border"
																		<% let color =  "background-color:" + c.nombre + ";"; %> 
																		<%= "style= " + color %> 
																	></button>
																	</a>
																</li>
															<% } %> 
														</ul>
													</div>
												</div>
											</div>
										</div>
										<div class="accordion-item">
											<h2 class="accordion-header" id="headingThree">
												<button
													class="accordion-button collapsed"
													type="button"
													data-bs-toggle="collapse"
													data-bs-target="#collapseThree"
													aria-expanded="true"
													aria-controls="collapseThree"
												>
													Precio
												</button>
											</h2>
											<div
												id="collapseThree"
												class="accordion-collapse collapse"
												aria-labelledby="headingThree"
												data-bs-parent="#accordionExample"
											>
												<div class="accordion-body"></div>
											</div>
										</div>
									</div>
								</section>
							</section>
						</div>
					</div>
				</div>
			<% } %> 
		</div>

		<main
			class="d-flex justify-content-center mx-auto p-3 ps-4 text-center" style="background-color: #eee"
		>
			<% if(productos.length >= 1 && nombreCategoria != "Resultado de la busqueda"){ %>
				<!-- <section
					class="d-none d-md-block p-3 w-25 border border-1 rounded mb-3"
					style="background-color: white"
				>
					<section class="sticky-top">
						<p class="mt-1 fs-4 fw-bold">Filtros</p>
						<div class="accordion" id="accordionExample">
							<div class="accordion-item">
								<h2 class="accordion-header" id="headingFour">
									<button
										class="accordion-button collapsed"
										type="button"
										data-bs-toggle="collapse"
										data-bs-target="#collapseFour"
										aria-expanded="true"
										aria-controls="collapseFour"
									>
										Pais
									</button>
								</h2>
								<div
									id="collapseFour"
									class="accordion-collapse collapse"
									aria-labelledby="headingFour"
									data-bs-parent="#accordionExample"
								>
									<div class="accordion-body">
										<% for(let p of paises) { %>
										<div class="form-check form-switch">
											<input
												class="form-check-input"
												type="checkbox"
												role="switch"
												id="flexSwitchCheckDefault"
												checked
											/>
											<label class="form-check-label" for="flexSwitchCheckDefault"
												><%= p.nombre %>
											</label>
										</div>
										<% } %>
									</div>
								</div>
							</div>
							<div class="accordion-item">
								<h2 class="accordion-header" id="headingOne">
									<button
										class="accordion-button collapsed"
										type="button"
										data-bs-toggle="collapse"
										data-bs-target="#collapseOne"
										aria-expanded="true"
										aria-controls="collapseOne"
									>
										Tipo de producto
									</button>
								</h2>
								<div
									id="collapseOne"
									class="accordion-collapse collapse"
									aria-labelledby="headingOne"
									data-bs-parent="#accordionExample"
								>
									<div class="accordion-body">
										<% for(let t of tipos){ %>
										<div class="form-check form-switch">
											<input
												class="form-check-input"
												type="checkbox"
												role="switch"
												id="flexSwitchCheckDefault"
												checked
											/>
											<label class="form-check-label" for="flexSwitchCheckDefault"
												><%= t.nombre %>
											</label>
										</div>
										<% } %>
									</div>
								</div>
							</div>
							 <div class="accordion-item">
								<h2 class="accordion-header" id="headingTwo">
									<button
										class="accordion-button collapsed"
										type="button"
										data-bs-toggle="collapse"
										data-bs-target="#collapseTwo"
										aria-expanded="false"
										aria-controls="collapseTwo"
									>
										Color
									</button>
								</h2>
								<div
									id="collapseTwo"
									class="accordion-collapse collapse"
									aria-labelledby="headingTwo"
									data-bs-parent="#accordionExample"
								>
									<div class="accordion-body">
										<div class="text-center mb-4">
											<ul
												class="nav justify-content-center align-items-center mx-auto"
												style="max-width: 300px"
											>
												<% for(let c of colores) { %>
													<li class="nav-item">
														<a class="nav-link p-0 my-2 mx-3" href="#">
															<button
																type="button"
																class="btn btn-light border"
																<% let color =  "background-color:" + c.nombre + ";"; %> 
																<%= "style= " + color %> 
															></button>
														</a>
													</li>
												<% } %>
											</ul>
										</div>
									</div>
								</div>
							</div> 
						</div>
					</section>
				</section> -->
			<% } %> 

			<section class="mx-3 w-75 d-md-block">
				<div class="row">
					<% if(productos.length < 1){ %>
						<p2 class="my-5">No hay productos que coincidan</p2>
					<% }else{ for (let p of productos) { %>

					<div class="col-12 col-sm-6 col-lg-4 mb-3">
						<div
							class="card h-100 shadow m-1 p-0 d-flex justify-content-between"
						>
							<a href="/products/detalle/<%=	p.idProductos %>"
								><img
									src="/imagenes/products/<%= p.imagen %>"
									class="card-img-top"
									alt="<%= p.imagen %>"
							/></a>
							<div class="card-body" style="max-height: 150px">
								<h5 class="card-title"><%= p.nombre %></h5>
								<p class="card-text">
									$<%= p.precio - ((p.precio * p.descuento) / 100) %>
								</p>
								<div
									class="card-text d-flex justify-content-evenly"
								>
									<% if (p.descuento > 0) { %>
										<p class="text-success "><%= p.descuento %>% OFF</p>
										<p class="text-decoration-line-through text-danger">
											$<%= p.precio %>
										</p>
									<% } %>
									<a href="/products/detalle/<%=	p.idProductos %>" type="button" class="btn btn-outline-success">
										Ver
									</a>
								</div>
							</div>
						</div>
					</div>
					<% } } %>
				</div>
			</section>
		</main>

		<%-include('../partials/footer') %>
	</body>
</html>
